# Release Notes - HelpHub

## [v3.4] — Principais mudanças

---

### **Novidades**
- **Departamentos:**  
  - Nova aba “Departamentos” com gerenciamento completo (criar, editar, excluir, contar usuários).
  - Novas tabelas: `departamentos` e `usuario_departamento`.
  - Rotas de API para CRUD de departamentos e vínculos.
  - Usuários agora exibem e permitem edição de seus departamentos vinculados.
  - Filtro de usuários por departamento.
  - Importação/exportação de departamentos e vínculos suportada.
  - Documentação atualizada para os novos recursos.

- **Chamados:**  
  - Novo chamado agora exige seleção do departamento responsável.
  - Campo “Departamento” exibido e editável nos detalhes do chamado.
  - Coluna “Departamento” adicionada na listagem de chamados.
  - Detalhes do chamado e ordem de serviço exibem corretamente o solicitante e o departamento.
  - Edição do departamento diretamente nos detalhes do chamado.
  - Filtro visual customizado de departamentos (dropdown com checkboxes) adicionado aos chamados abertos e finalizados.

- **Estatísticas:**  
  - Adicionado filtro por departamento nas estatísticas de chamados (gráficos, totais e últimos chamados).

- **Controle de Brilho (Tema Escuro):**  
  - Novo controle deslizante na navbar para ajustar o brilho da página (0% a 70%).
  - Efeito "apagar a luz" com overlay que escurece toda a tela proporcionalmente.
  - Persistência automática da configuração do usuário no navegador.
  - Limite máximo seguro de 70% para evitar tela completamente preta.
  - Interface intuitiva com ícones de sol e lua, valor atual em destaque.
  - Indicador visual vermelho quando o brilho está muito alto (≥50%).
  - Compatibilidade total com todas as páginas do sistema.

- **Inversão de Cores:**  
  - Novo botão de paleta na navbar para inverter todas as cores da página.
  - Efeito visual completo que transforma branco em preto, azul em laranja, etc.
  - Correção automática para imagens e logos que ficam invertidas duas vezes.
  - Persistência da configuração no navegador.
  - Exclusão mútua com controle de brilho (ativar um desativa o outro automaticamente).
  - Útil para usuários com necessidades especiais de contraste.

- **Central de Ajuda (HelpHub):**  
  - Busca fuzzy: tolera erros de digitação e encontra termos aproximados em títulos e conteúdos.
  - Snippets destacados: mostra trechos do conteúdo com o termo buscado em destaque.
  - Debounce na busca: evita buscas excessivas durante a digitação.
  - Sidebar colapsável e menu hamburger para mobile.
  - Gestos touch e botão fixo de acesso ao menu em mobile.
  - Experiência mobile aprimorada e melhorias de usabilidade/acessibilidade.

---

### **Melhorias**
- Visual dos formulários de chamado padronizado com o de clientes.
- Visual e foco dos campos de chamado padronizados (azul).
- Ordem de exibição das tabelas no Visualizador do Banco de Dados ajustada para refletir a ordem correta de importação, com numeração.
- Exportação de tabelas agora inclui numeração no nome do arquivo, facilitando a ordenação no Windows.
- Importação de CSV aprimorada: agora utiliza PapaParse, suportando campos multiline e HTML corretamente.
- Script PapaParse adicionado ao HTML do visualizador de banco de dados.
- Código de importação de CSV simplificado e mais robusto.
- Cards de estatísticas agora são resetados corretamente ao trocar filtros, evitando exibição de dados inconsistentes.
- Tratamento aprimorado para dados vazios e mensagens amigáveis quando não há chamados para o filtro selecionado.
- Experiência mobile e navegação mais intuitiva.
- Controle de brilho integrado à navbar para personalização visual do usuário.
- Botão de inversão de cores para acessibilidade e preferências visuais.
- Sistemas de personalização visual mutuamente exclusivos para evitar conflitos.

---

### **Correções**
- Rotas de chamados ajustadas para retornar o nome do departamento e o solicitante em todos os endpoints relevantes.
- Correção no mapeamento dos campos para garantir exibição correta na ordem de serviço.
- Correções na aplicação do filtro para garantir que os dados exibidos correspondam ao departamento selecionado.

---


_____________________________________________________________________________
### **Ainda falta fazer**

- Regras de SLA.
- Relatórios de chamados por departamento/atendente/data.

